<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RSP - Rotational Sensor Proxy &mdash; MagneticReadoutProcessing  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Module - UserDefinedProcessingPipeline" href="UserDefinedProcessingPipeline.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MagneticReadoutProcessing
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI - Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">UDPP - User Defined Processing Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="MagneticReadoutProcessing.html">Module - MagneticReadoutProcessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="UserDefinedProcessingPipeline.html">Module - UserDefinedProcessingPipeline</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">RSP - Rotational Sensor Proxy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#proxy-for-rotational-sensor">Proxy for rotational sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-the-rest-api">Accessing the Rest-API</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MagneticReadoutProcessing</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">RSP - Rotational Sensor Proxy</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/RotationalSensorProxy.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rsp-rotational-sensor-proxy">
<h1>RSP - Rotational Sensor Proxy<a class="headerlink" href="#rsp-rotational-sensor-proxy" title="Link to this heading"></a></h1>
<p>This cli module is used to interface the currently most complex implemented sensor.
The roational sensor scans a manget using a polar mechanical sensor around the magnet.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to allow direct running of the examples below, the <code class="docutils literal notranslate"><span class="pre">venv</span></code> is used.
So all cli commands are changed to: <code class="docutils literal notranslate"><span class="pre">./venv/bin/python3.9</span> <span class="pre">./MRPRotationalSensorProxy/rsp.py</span></code> instead of <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">./MRPRotationalSensorProxy/rsp.py</span></code>.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Help</span>
$<span class="w"> </span>./venv/bin/python3.9<span class="w"> </span>./MRPRotationalSensorProxy/rsp.py<span class="w"> </span>--help
Usage:<span class="w"> </span>rsp.py<span class="w"> </span>proxy<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span>COMMAND<span class="w"> </span><span class="o">[</span>ARGS<span class="o">]</span>...
Options:
--help<span class="w">  </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.
Commands:
rotational
</pre></div>
</div>
</section>
<section id="proxy-for-rotational-sensor">
<h2>Proxy for rotational sensor<a class="headerlink" href="#proxy-for-rotational-sensor" title="Link to this heading"></a></h2>
<p>To run a network proxy for a rotational sensor, start this software on the SMB inside of the roational sensor.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># launch Help</span>
$<span class="w"> </span>./venv/bin/python3.9<span class="w"> </span>./MRPRotationalSensorProxy/rsp.py<span class="w"> </span>rotational<span class="w"> </span>--help
Usage:<span class="w"> </span>rsp.py<span class="w"> </span>proxy<span class="w"> </span>launch<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span>

Options:
--port<span class="w"> </span>INTEGER<span class="w">         </span>default:<span class="w"> </span><span class="m">5556</span>
--host<span class="w"> </span>TEXT<span class="w">            </span>default:<span class="w"> </span><span class="m">0</span>.0.0.0
--debug<span class="w"> </span>/<span class="w"> </span>--no-debug<span class="w">   </span>default:<span class="w"> </span>no-debug
--klipperenpoint<span class="w"> </span>TEXT<span class="w">  </span>default:<span class="w"> </span>http://127.0.0.1
--sensordevice<span class="w"> </span>TEXT<span class="w">    </span>default:<span class="w"> </span>/dev/ttyACM0
--sensorbaud<span class="w"> </span>INTEGER<span class="w">   </span>default:<span class="w"> </span><span class="m">0</span>
--help<span class="w">                 </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.
</pre></div>
</div>
<p>To run the proxy interface and start the rest api, the launch command can be used with parameters from above.
Here in general two parameters are needed. One for the movement (klipper/moonraker) instance and one to interface the sensor.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># url of the klipper instance, typical: klipperenpoint=http://127.0.0.1</span>
<span class="c1"># sensordevice=/dev/ttyACMO or /dev/ttyUSB0 or use  ls /dev/serial/by-id/* go get right path</span>
<span class="c1"># also socket:// urls are supporty by using it together with ser2net</span>
$<span class="w"> </span>./venv/bin/python3.9<span class="w"> </span>./MRPRotationalSensorProxy/rsp.py<span class="w"> </span>proxy<span class="w"> </span>rotational<span class="w"> </span>--klipperenpoint<span class="w"> </span>http://192.168.178.123<span class="w"> </span>--sensordevice<span class="o">=</span>socket://192.168.178.123:10001
//<span class="w"> </span>FIRMWARE_NAME:Klipper<span class="w"> </span>FIRMWARE_VERSION:v0.11.0-303-g67499853
PRECHECK:<span class="w"> </span>MECHANIC:<span class="w"> </span>True
PRECHECK:<span class="w"> </span>SENSOR:<span class="w"> </span><span class="m">525771256544952</span>
Proxy<span class="w"> </span>started.<span class="w"> </span>http://0.0.0.0:5556/
Terminate<span class="w">  </span><span class="o">[</span>Y/n<span class="o">]</span><span class="w"> </span><span class="o">[</span>y<span class="o">]</span>:
</pre></div>
</div>
</section>
<section id="accessing-the-rest-api">
<h2>Accessing the Rest-API<a class="headerlink" href="#accessing-the-rest-api" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="UserDefinedProcessingPipeline.html" class="btn btn-neutral float-left" title="Module - UserDefinedProcessingPipeline" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Marcel Ochsendorf.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>