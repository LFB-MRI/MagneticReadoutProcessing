CLI - Commandline Interface
###########################

.. note::
   For the following cli examples a working sensor with ``UnifiedMagBoardFirmware``is required.


Installation
************

.. note::
    As the package has not been published on PyPi yet, it CANNOT be install using pip.
    So for the CLI, the same installation procedure is used as for the main ``MagneticReadoutProcessing`` package.


.. code-block:: console

    $ git clone https://github.com/LFB-MRI/MagneticReadoutProcessing ./MagneticReadoutProcessing
    $ cd ./MagneticReadoutProcessing
    $ pip3 install -r requirements.txt
    $ cd ./cli





Usage
*****

.. code-block:: console

    $ python3 ./cli.py --help
    #/usr/bin/python3 cli/cli.py --help 
    #Importing /Users/marcelochsendorf/Downloads/MagneticReadoutProcessing/src/MagneticReadoutProcessing/cli/cli_helper.py
    #Usage: cli.py [OPTIONS] COMMAND [ARGS]...

    #Options:
    #--install-completion  Install completion for the current shell.
    #--show-completion     Show completion for the current shell, to copy it or
    #                      customize the installation.
    #--help                Show this message and exit.

    #Commands:
    #config
    #measure
    #sensor



Basic commands
==============

The cli offers a easy way to take sensor measurements and readings.
Multible sensors can be connected to the host running the CLI.
To allow a level of automation and integration into CI pipelines, several different configurations can be created to perform different measurements.

The following example shows how to create a configuration and start a measurement run.


The first step is to test the connected sensors.
For this task a new configuration is needed.
The ``configname``parameter is equal to the filename of the generated configfile.

The ``setupsensor`` parameter launchs the sensor configuration wizard. 
Here all connected sensors are listed. If an other sensor hardware is used (with different vid/pid), its possible to specify the port manually

.. code-block:: bash
    
    # ./cli.py config setupsensor <configname>
    $ python3 ./cli.py config setupsensor testcfg
    0 > Unified Sensor 386731533439 - /dev/cu.usbmodem3867315334391
    Please select one of the found sensors [0]: 
    sensor connected: True 1243455
    SENSOR SETUP COMPLETE: ./configs/testcfg_config.json

    # ./cli.py config setupsensor <configname> <device_path>
    $ python3 ./cli.py config setupsensor testcfg /dev/tty
    sensor connected: True 54224326
    SENSOR SETUP COMPLETE: ./configs/testcfg_config.json
    


